<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0172)http://safari.informit.com/JVXSL.asp?x=1&mode=print&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-16-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1 -->
<HTML><HEAD><TITLE>InformIT Online Books > LPI Linux Certification in a Nutshell</TITLE>
<META http-equiv=Content-Type content="text/html; charset=big5"><LINK 
href="16-2.files/style.css" type=text/css rel=STYLESHEET><LINK 
href="16-2.files/docsafari.css" type=text/css rel=STYLESHEET>
<SCRIPT>
      function OpenWin(url, w, h)
      {
        if(!w) w = 400;
        if(!h) h = 300;
        window.open(url, "_new", "width=" + w + ",height=" + h + ",menubar=no,toobar=no,scrollbars=yes", true);
      }
    </SCRIPT>

<META content="Microsoft FrontPage 4.0" name=GENERATOR></HEAD>
<BODY leftMargin=0 topMargin=0 marginheight="0" marginwidth="0"><A 
name=toppage></A><SPAN class=v2></SPAN>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR vAlign=top>
    <TD align=left>
      <TABLE width="95%">
        <TBODY>
        <TR>
          <TD align=left><BR><SPAN class=printhdr><B>Book: </B>LPI Linux  
            Certification in a Nutshell<BR><B>Section: </B>Chapter 16.&nbsp;  
            Text-Editing, Processing, and Printing (Topic  
1.7)</SPAN><BR><BR><BR>
            <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
              <TBODY>
              <TR>
                <TD vAlign=top><A name=lpicertnut-CHP-16-SECT-2></A>
                  <H3 class=docSection1Title>16.2 Objective 2: Manage Printers 
                  and Print Queues</H3>
                  <P class=docText><A name=lpicertnut-IDXTERM-1097></A>Printing  
                  documents is a slow and error-prone process. Printers accept  
                  data in small amounts; they run out of paper, jam, and go  
                  offline for other reasons. Printers also must accept requests  
                  from multiple system users. As a result, by design, the end  
                  user is isolated from printing functions on most computer  
                  systems. This isolation comes in the form of a <SPAN  
                  class=docEmphasis>print queue</SPAN><A 
                  name=IXT-16-350727></A>, which holds print requests until the  
                  printer is ready for them. It also manages the order in which  
                  print jobs are processed. </P> 
                  <P class=docText>Many Unix and <A name=IXT-16-350728></A>Linux  
                  systems use printing utilities developed for Berkeley Unix,  
                  commonly known as <SPAN class=docEmphBold>lpd</SPAN>. This  
                  objective describes <A  
                  name=lpicertnut-IDXTERM-1100></A>printer management using  
                  <SPAN class=docEmphBold>lpd. The</SPAN> <A  
                  name=lpicertnut-IDXTERM-1101></A><A 
                  name=lpicertnut-IDXTERM-1102></A>companion commands <SPAN  
                  class=docEmphBold>lpr</SPAN>, <SPAN  
                  class=docEmphBold>lpq</SPAN>, and <SPAN  
                  class=docEmphBold>lprm</SPAN> areSUID programs, which run with  
                  privileges of the superuser.<SUP class=docFootnote>[3]</SUP> This is  
                  necessary to allow their use by all users, because they  
                  manipulate files in the protected print spooling directories.  
                  <SPAN class=docEmphBold>lpr</SPAN> is covered in <a class="docLink" href="16-3.htm">Section  
                  16.3</a>. <SPAN class=docEmphBold>lpd</SPAN>, filters, spool  
                  directories, and <I>/etc/printcap</I> is covered in <a class="docLink" href="16-4.htm">Section  
                  16.4</a>. </P>
                  <BLOCKQUOTE>
                    <P class=docFootnote><SUP><A name="">[3]</A></SUP> SUID  
                    means "set user ID" root; see <a class="docLink" href="04-5.htm">Section  
                    4.5</a>.</P></BLOCKQUOTE><A 
                  name=lpicertnut-CHP-16-SECT-2.1></A>
                  <H4 class=docSection2Title>16.2.1 Linux Printing Overview</H4>
                  <P class=docText>On Linux, the default printing system is 
                  derived from a standard developed for Unix systems. It 
                  consists of the following elements: </P>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lpd</SPAN> </SPAN>
                    <DD>
                    <P class=docList>The <SPAN class=docEmphBold>lpd</SPAN> 
                    daemon is started at boot time and runs constantly, 
                    listening for print requests directed at multiple printers. 
                    When a job is submitted to a print queue, <SPAN 
                    class=docEmphBold>lpd</SPAN> forks a copy of itself to 
                    handle jobs on that queue. The copy exits when the queue is 
                    emptied. Thus, during idle periods, one <SPAN 
                    class=docEmphBold>lpd</SPAN> process will be running on your 
                    system. When printing is active, one additional <SPAN 
                    class=docEmphBold>lpd</SPAN> process will be running for 
                    each active queue. </P></DD></DL><A name=IXT-16-350729></A>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><I>/etc/printcap</I></SPAN> 
                    <DD>
                    <P class=docList>The <I>printcap </I>file (short for  
                    "printer capabilities") contains printer names, parameters,  
                    and rules; it is used by <SPAN class=docEmphBold>lpd</SPAN>  
                    when spooling print jobs. See Objective 4 for additional  
                    information on the <I>/etc/printcap</I><A  
                    name=IXT-16-350729></A> file. </P></DD></DL> 
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lpr</SPAN></SPAN> 
                    <DD>
                    <P class=docList>The <SPAN class=docEmphBold>lpr</SPAN> 
                    (short for "line print") program submits both files and 
                    information piped to its standard input to print queues. 
                    </P></DD></DL>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lpq</SPAN></SPAN> 
                    <DD>
                    <P class=docList>The <SPAN class=docEmphBold>lpq</SPAN> 
                    program queries and displays the status and contents of 
                    print queues. </P></DD></DL>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lprm</SPAN></SPAN> 
                    <DD>
                    <P class=docList><SPAN class=docEmphBold>lprm</SPAN> removes 
                    print jobs from print queues<I>.</I> </P></DD></DL>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lpc</SPAN></SPAN> 
                    <DD>
                    <P class=docList>The superuser administers print queues with 
                    <SPAN class=docEmphBold>lpc</SPAN> (line printer control). 
                    </P></DD></DL><A name=IXT-16-350730></A><A 
                  name=IXT-16-350731></A><A name=IXT-16-350732></A>
                  <DL class=docList>
                    <DT><I><SPAN class=docPubcolor>Filters</SPAN></I> 
                    <DD>
                    <P class=docList><A name=IXT-16-350730></A><A 
                    name=IXT-16-350731></A><A name=IXT-16-350732></A>When a  
                    printer lacks the ability to directly render a print job,  
                    software filters are used to transform the origin data into  
                    something the printer can handle. A common example is the  
                    conversion from PostScript to PCL for laser printers without  
                    native PostScript capability. </P></DD></DL><A  
                  name=IXT-16-350733></A><A name=IXT-16-350734></A><A 
                  name=IXT-16-350735></A>
                  <DL class=docList>
                    <DT><I><SPAN class=docPubcolor>Spool directories</SPAN></I> 
                    <DD>
                    <P class=docList>The <SPAN class=docEmphBold>lpd</SPAN><A  
                    name=IXT-16-350733></A> daemon uses <I>/var/spool/lpd</I><A  
                    name=IXT-16-350734></A> for the spooling of data awaiting  
                    printing. This directory contains a subdirectory for each  
                    printer configured on the system (both local and remote).  
                    For example, the default locally attached printer on most  
                    Linux systems is simply called <SPAN  
                    class=docEmphBold>lp</SPAN><A name=IXT-16-350735></A> (for  
                    "line printer"), and all of its control files and queued  
                    jobs are stored in directory <I>/var/spool/lpd/lp</I>.  
                    </P></DD></DL><A name=IXT-16-350736></A>
                  <DL class=docList>
                    <DT><I><SPAN class=docPubcolor>Print jobs</SPAN></I> 
                    <DD>
                    <P class=docList><A name=IXT-16-350736></A>Each submitted  
                    print request is spooled to a queue and assigned a unique  
                    number. The numbered print jobs can be examined and  
                    manipulated as needed. </P></DD></DL><A  
                  name=lpicertnut-CHP-16-SECT-2.2></A>
                  <H4 class=docSection2Title>16.2.2 Managing Print Queues</H4>
                  <P class=docText>As a system administrator, you'll be asked to 
                  manage and manipulate printer queues more often than you'd 
                  like. On Linux, the <SPAN class=docEmphBold>lpq</SPAN>, <SPAN 
                  class=docEmphBold>lprm</SPAN>, and <SPAN 
                  class=docEmphBold>lpc</SPAN> commands are your tools. </P><A 
                  name=p2_ch06-10-fm2xml></A><A name=IXT-16-350737></A><A 
                  name=IXT-16-350738></A>
                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><B><I>lpq</I></B></TD>
                      <TD align=right></TD></TR></TBODY></TABLE>
                  <HR align=left width=515 color=black noShade SIZE=3>

                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left></TD>
                      <TD align=right></TD></TR></TBODY></TABLE><A 
                  name=p2_ch06-12-fm2xml></A>
                  <H4 class=docRefsectTitle>Syntax</H4><PRE>lpq [options] [users] [ job#s]</PRE><A 
                  name=p2_ch06-13-fm2xml></A>
                  <H4 class=docRefsectTitle>Description</H4>
                  <P class=docText><A name=IXT-16-350737></A><A 
                  name=IXT-16-350738></A>Query a print queue. If numeric  
                  <I>job#s</I> are included, only those jobs are listed. If  
                  <I>users</I> are listed, only jobs submitted by those users  
                  are listed. </P><A name=p2_ch06-14-fm2xml></A> 
                  <H4 class=docRefsectTitle>Options</H4>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>-l</SPAN></SPAN> 
                    <DD>
                    <P class=docList>Long output format. This option results in 
                    a multiline display for each print job. </P></DD></DL>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>-P</SPAN><SPAN 
                    class=docEmphasis>name</SPAN></SPAN> 
                    <DD>
                    <P class=docList>This specifies the print queue <I>name</I>. 
                    In the absence of <SPAN class=docEmphBold>-P</SPAN>, the 
                    default printer is queried. </P></DD></DL><A 
                  name=p2_ch06-15-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 1</H4>
                  <P class=docText>Examine active jobs:</P><PRE>$ <B>lpq</B>
lp is ready and printing
Rank   Owner      Job  Files                 Total Size
active root       193  filter                9443 bytes
1st    root       194  resume.txt            11024 bytes
2nd    root       196  (standard input)      18998 bytes</PRE>
                  <P class=docText>Here, <I>filter</I> is currently being 
                  printed. <I>resume.txt</I> is up next, followed by the 18,998 
                  bytes of data that was piped into <SPAN 
                  class=docEmphBold>lpr</SPAN>'s standard input. </P><A 
                  name=p2_ch06-16-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 2</H4>
                  <P class=docText>Examine queue <SPAN 
                  class=docEmphBold>lp</SPAN>, which turns out to be empty: </P><PRE>$ <B>lpq -Plp</B>
no entries</PRE><A name=p2_ch06-17-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 3</H4>
                  <P class=docText>Examine those same jobs using the long 
                  format:</P><PRE>$ <B>lpq -l</B>
lp is ready and printing

root: active                             [job 193AsJRzIt]
        filter                           9443 bytes

root: 1st                                [job 194AMj9lo9]
        resume.txt                       11024 bytes

root: 2nd                                [job 196A6rUGu5]
        (standard input)                 18998 bytes</PRE><A 
                  name=p2_ch06-18-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 4</H4>
                  <P class=docText>Examine jobs owned by <I>bsmith</I>:</P><PRE>$ <B>lpq bsmith</B>
Rank   Owner      Job  Files                 Total Size
7th    bsmith     202  .bash_history         1263 bytes
9th    bsmith     204  .bash_profile         5676 bytes</PRE>
                  <P class=docText>Using the job numbers reported by <SPAN 
                  class=docEmphBold>lpq</SPAN>, any user may remove her own 
                  print jobs from the queue, or the superuser may remove any 
                  job. </P><A name=p2_ch06-19-fm2xml></A><A 
                  name=IXT-16-350739></A><A name=IXT-16-350740></A>
                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><B><I>lprm</I></B></TD>
                      <TD align=right></TD></TR></TBODY></TABLE>
                  <HR align=left width=515 color=black noShade SIZE=3>

                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left></TD>
                      <TD align=right></TD></TR></TBODY></TABLE><A 
                  name=p2_ch06-21-fm2xml></A>
                  <H4 class=docRefsectTitle>Syntax</H4><PRE>lprm [-Pname] [users] [job#s]
lprm -</PRE><A name=p2_ch06-22-fm2xml></A>
                  <H4 class=docRefsectTitle>Description</H4>
                  <P class=docText><A name=IXT-16-350739></A><A 
                  name=IXT-16-350740></A>Remove jobs from a print queue. In the  
                  first form, remove jobs from queue <I>name</I> or from the  
                  default queue if <SPAN class=docEmphBold>-P</SPAN> is omitted.  
                  If <I>users</I> or <I>job#s</I> are specified, only those jobs  
                  will be removed. In the second form, all of a normal user's  
                  jobs will be omitted; for the superuser, the queue will be  
                  emptied. </P><A name=p2_ch06-23-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 1</H4>
                  <P class=docText>As a normal user, remove all of your print 
                  jobs:</P><PRE>$ <B>lprm -</B></PRE><A name=p2_ch06-24-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 2</H4>
                  <P class=docText>As the superuser, remove all jobs from queue 
                  <SPAN class=docEmphBold>ps</SPAN>: </P><PRE># <B>lprm -Pps -</B></PRE>
                  <P class=docText>You may occasionally be surprised to see a 
                  <TT>no</TT> <TT>entries</TT> response from <SPAN 
                  class=docEmphBold>lpq</SPAN>, despite observing that the 
                  printer is dutifully printing a document. In such cases, the 
                  spool has probably been emptied into the printer's buffer 
                  memory, and the result is that the job is no longer under the 
                  control of the printing system. To kill such jobs, you need to 
                  use the printer's controls (or its power switch!) to stop and 
                  delete the job from memory. </P><A 
                  name=lpicertnut-CHP-16-SECT-2.2.1></A>
                  <H5 class=docSection3Title>16.2.2.1 Managing print queues with 
                  lpc</H5>
                  <P class=docText><A name=lpicertnut-IDXTERM-1115></A>Printer  
                  control on Linux includes the oversight of three distinct and  
                  independently controlled activities managed by the <SPAN  
                  class=docEmphBold>lpd</SPAN> daemon: </P> 
                  <DL class=docList>
                    <DT><I><SPAN class=docPubcolor>Job queuing</SPAN></I> 
                    <DD>
                    <P class=docList>Turn new print jobs on and off.</P></DD></DL>
                  <DL class=docList>
                    <DT><I><SPAN class=docPubcolor>Printing</SPAN></I> 
                    <DD>
                    <P class=docList>Turn on and off the transfer of data to 
                    your printer.</P></DD></DL>
                  <DL class=docList>
                    <DT><SPAN class=docPubcolor><SPAN 
                    class=docEmphBold>lpd</SPAN> child processes</SPAN> 
                    <DD>
                    <P class=docList>Force the per-queue <SPAN 
                    class=docEmphBold>lpd</SPAN> subprocesses to exit and 
                    restart. </P></DD></DL>
                  <P class=docText><SPAN class=docEmphBold>lpc</SPAN> can be 
                  used in either interactive or command-line form. If <SPAN 
                  class=docEmphBold>lpc</SPAN> is entered without any options, 
                  it enters interactive mode and displays its own prompt where 
                  <SPAN class=docEmphBold>lpc</SPAN> commands may then be 
                  entered. For example: </P><PRE># <B>lpc</B>
lpc&gt; <B>help</B>
Commands may be abbreviated.  Commands are:

abort   enable  disable help    restart status  topq    ?
clean   exit    down    quit    start   stop    up
lpc&gt;</PRE>
                  <P class=docText>If valid commands are included on the command 
                  line, <SPAN class=docEmphBold>lpc</SPAN> responds identically 
                  but returns control to the terminal: </P><PRE># <B>lpc help</B>
Commands may be abbreviated.  Commands are:

abort   enable  disable help    restart status  topq    ?
clean   exit    down    quit    start   stop    up
#</PRE>
                  <P class=docText>For the discussion that follows, <SPAN 
                  class=docEmphBold>lpc</SPAN> commands are shown as entered on 
                  the command line, but results in interactive mode are 
                  identical. </P><A name=p2_ch06-26-fm2xml></A><A 
                  name=IXT-16-350741></A><A name=IXT-16-350742></A><A 
                  name=IXT-16-350743></A><A name=IXT-16-350744></A><A 
                  name=IXT-16-350745></A><A name=IXT-16-350746></A><A 
                  name=IXT-16-350747></A><A name=IXT-16-350748></A><A 
                  name=IXT-16-350749></A><A name=IXT-16-350750></A><A 
                  name=IXT-16-350751></A><A name=IXT-16-350752></A><A 
                  name=IXT-16-350753></A><A name=IXT-16-350754></A><A 
                  name=IXTR3-83></A>
                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left><B><I>lpc</I></B></TD>
                      <TD align=right></TD></TR></TBODY></TABLE>
                  <HR align=left width=515 color=black noShade SIZE=3>

                  <TABLE cellPadding=5 width=515 border=0>
                    <TBODY>
                    <TR>
                      <TD align=left></TD>
                      <TD align=right></TD></TR></TBODY></TABLE><A 
                  name=p2_ch06-27-fm2xml></A>
                  <H4 class=docRefsectTitle></H4><A name=p2_ch06-28-fm2xml></A>
                  <H4 class=docRefsectTitle>Syntax</H4><PRE>lpc
lpc [command]</PRE><A name=p2_ch06-29-fm2xml></A>
                  <H4 class=docRefsectTitle>Description</H4>
                  <P class=docText>In the first form, enter interactive mode and  
                  accept <SPAN class=docEmphBold>lpc</SPAN> commands. In the  
                  second form, submit <I>command</I> for processing directly  
                  from the command line. <SPAN class=docEmphBold>lpc</SPAN> has  
                  no command-line options. Instead, it has commands (see <a class="docLink" href="#lpicertnut-CHP-16-TABLE-3">Table  
                  16-3</a>), which are separated here into two groups -- those  
                  that affect print queues and those that don't. Most of the  
                  commands require a single argument: either the word  
                  <TT>all</TT> (meaning all printers) or a specific printer  
                  name.<SUP class=docFootnote>[4]</SUP> </P>
                  <BLOCKQUOTE>
                    <P class=docFootnote><SUP><A name="">[4]</A></SUP> For this 
                    reason, <TT>all</TT> would be a bad choice for a print queue 
                    name!</P></BLOCKQUOTE><A name=lpicertnut-CHP-16-TABLE-3></A>
                  <P>
                  <TABLE cellSpacing=0 cellPadding=1 width="100%" border=1>
                    <CAPTION>
                    <H5 class=docTableTitle>Table 16-3. Commands for lpc 
                    </H5></CAPTION>
                    <COLGROUP span=2>
                    <TBODY>
                    <TR>
                      <TH class=docTableHeader>
                        <P class=docText>Command</P></TH>
                      <TH class=docTableHeader>
                        <P class=docText>Description</P></TH></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350741></A><PRE>abort {all|printer}</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>This command works like <TT>stop</TT> 
                        but terminates printing immediately, even in the middle 
                        of a job. The job is retained for reprint when the 
                        printer is again <TT>start</TT>ed. </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350742></A><A 
                        name=IXT-16-350743></A><PRE>disable {all|printer}
enable {all|printer}</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>These two commands control the queuing 
                        of new print jobs. With a queue disabled but printing 
                        started, printing continues but new jobs are rejected. 
                        </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350744></A><PRE>down {all|printer} [message]</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText><TT>disable</TT>, <TT>stop</TT>, and 
                        store the free-form <TT><I>message</I></TT> for display 
                        by <SPAN class=docEmphBold>lpr</SPAN>, informing the 
                        user why the printer is unavailable. </P></TD></TR>
                    <TR>
                      <TD class=docTableCell>
                        <P class=docText><TT>exit</TT><A name=IXT-16-350745></A> 
                        or <TT>quit</TT><A name=IXT-16-350746></A> </P></TD> 
                      <TD class=docTableCell>
                        <P class=docText>Terminate <SPAN 
                        class=docEmphBold>lpc</SPAN>'s interactive mode. 
                    </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350747></A><PRE>help</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>Display help information on commands, 
                        as shown earlier.</P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350748></A><PRE>restart {all|printer}</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>This command kills and restarts a child 
                        <SPAN class=docEmphBold>lpd</SPAN>, or starts one when 
                        none was previously running. </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350749></A><A 
                        name=IXT-16-350750></A><PRE>start {all|printer}
stop {all|printer}</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>These two commands control printing and 
                        the child <SPAN class=docEmphBold>lpd</SPAN> processes. 
                        When a <TT>stop</TT> command is issued, the current 
                        print job is allowed to complete. Then the child daemon 
                        is stopped and further printing is disabled. 
                        <TT>start</TT> enables sprinting and starts the child 
                        <SPAN class=docEmphBold>lpd</SPAN> if jobs are pending. 
                        The print queues remain active. </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350751></A><PRE>status [all|printer]</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>Display queue status. The 
                        <TT>all|</TT><TT><I>printer</I></TT> argument is 
                        optional for this command. </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350752></A><PRE>topq name jobs</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText>Place <TT><I>jobs</I></TT> at the top 
                        of queue <TT><I>name</I></TT>, behind any active jobs. 
                        </P></TD></TR>
                    <TR>
                      <TD class=docTableCell><A name=IXT-16-350753></A><PRE>up {all|printer}</PRE></TD>
                      <TD class=docTableCell>
                        <P class=docText><TT>enable</TT> and 
                      <TT>start</TT>.</P></TD></TR></TBODY></TABLE><A 
                  name=p2_ch06-30-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 1</H4>
                  <P class=docText>Use the status command to display current 
                  printing activity:</P><PRE># <B>lpc status</B>
lp:
	queuing is enabled
	printing is enabled
	2 entries in spool area
	lp is ready and printing</PRE><A name=p2_ch06-31-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 2</H4>
                  <P class=docText>Suppose user <I>jdean</I> has submitted two 
                  important print jobs, 206 and 207, and that he needs job 207 
                  to be moved to the top of the queue, followed immediately by 
                  206 (see the emphasized lines in the <SPAN 
                  class=docEmphBold>lpq</SPAN> output). First, examine the 
                  existing jobs: </P><PRE># <B>lpq</B>
Rank   Owner      Job  Files                 Total Size
active root       203  filter                9443 bytes
1st    root       204  status                25 bytes
2nd    root       205  (standard input)      6827 bytes
<B>3rd    jdean      206  (standard input)      403 bytes</B>
<B>4th    jdean      207  cert1.txt             4865 bytes</B></PRE>
                  <P class=docText>Now modify the position of print jobs 206 and 
                  207:</P><PRE># <B>lpc topq lp 207 206</B>
lp:
	moved cfA206AlIwYoh
	moved cfA207Ad6utse</PRE>
                  <P class=docText>Finally, verify the results:</P><PRE># <B>lpq</B>
Rank   Owner      Job  Files                 Total Size
<B>1st    jdean      207  cert1.txt             4865 bytes</B>
<B>2nd    jdean      206  (standard input)      403 bytes</B>
3rd    root       203  filter                9443 bytes
4th    root       204  status                25 bytes
5th    root       205  (standard input)      6827 bytes</PRE>
                  <P class=docText>With this reconfiguration, printing continues 
                  with jobs 207 and 206 first, and then reverts to jobs 203 
                  through 205. </P><A name=p2_ch06-32-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 3</H4>
                  <P class=docText>Disable and enable print queue <SPAN 
                  class=docEmphBold>lp</SPAN>, to allow current printing to 
                  complete while rejecting new jobs: </P><PRE># <B>lpc disable lp</B>
lp:
	queuing disabled
# <B>lpc enable lp</B>
lp:
	queuing enabled</PRE><A name=p2_ch06-33-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 4</H4>
                  <P class=docText>Stop and restart printing on the printer 
                  attached to queue <SPAN class=docEmphBold>lp</SPAN>, but allow 
                  new jobs to be queued for future printing: </P><PRE># <B>lpc stop lp</B>
lp:
	printing disabled
# <B>lpc start lp</B>
lp:
	printing enabled
	daemon started  </PRE>
                  <P class=docText>If no jobs are pending, a child <SPAN 
                  class=docEmphBold>lpd</SPAN> will not start immediately in 
                  response to <SPAN class=docEmphBold>start</SPAN>, though the 
                  <TT>daemon started</TT> message is still displayed. Note also 
                  that when a child <SPAN class=docEmphBold>lpd</SPAN> process 
                  is stopped, its subprocesses (such as filters) are also 
                  stopped. </P><A name=p2_ch06-34-fm2xml></A>
                  <H4 class=docRefsectTitle>Example 5</H4>
                  <P class=docText>Abandon all printing activity on the print 
                  queue <SPAN class=docEmphBold>lp</SPAN>. Note that a printer 
                  with data in its print buffer may continue to print even after 
                  an <SPAN class=docEmphBold>abort</SPAN>: </P><PRE># <B>lpc abort lp</B>
lp:
printing disabled
daemon (pid 2012) killed    </PRE>
                  <P>
                  <TABLE cellSpacing=0 width="90%" border=1>
                    <TBODY>
                    <TR>
                      <TD>
                        <H2 class=docSidebarTitle>On the Exam</H2>
                        <P class=docText>You'll need to know the function of  
                        each of the <SPAN class=docEmphBold>lpq</SPAN>, <SPAN  
                        class=docEmphBold>lprm</SPAN>, and <SPAN  
                        class=docEmphBold>lpc</SPAN> commands as well as their  
                        options. Note that <SPAN class=docEmphBold>lpq</SPAN>  
                        and <SPAN class=docEmphBold>lprm</SPAN> (along with  
                        <SPAN class=docEmphBold>lpr</SPAN>, described later)  
                        share the <SPAN class=docEmphBold>-P</SPAN> option to  
                        specify a printer. Pay special attention to <SPAN  
                        class=docEmphBold>lpc</SPAN>'s syntax, including the <A  
                        name=IXT-16-350754></A><TT>all</TT> or  
                        <TT><I>printer</I></TT> arguments (without one of these,  
                        <SPAN class=docEmphBold>lpc</SPAN> won't do anything).  
                        Remember that <SPAN class=docEmphBold>lpc</SPAN>  
                        commands <TT>disable</TT>/<TT>enable</TT> handle queues,  
                        <TT>stop</TT>/<TT>start</TT> handle printing and child  
                        <SPAN class=docEmphBold>lpd</SPAN>s, and  
                        <TT>down</TT>/<TT>up</TT> handle all three. Also  
                        remember that <SPAN class=docEmphBold>lpc</SPAN>  
                        commands can be entered on the command line or  
                        interactively.<A name=IXTR3-83></A> 
                  </P></TD></TR></TBODY></TABLE><A 
                  name=lpicertnut-CHP-16-SECT-2.2.2></A>
                  <H5 class=docSection3Title>16.2.2.2 Queuing and printing 
                  control details</H5>
                  <P class=docText><A name=IXT-16-350755></A><A 
                  name=IXT-16-350756></A>Though it is beyond the scope of the  
                  LPIC Level 1 exams, it's interesting to note that <SPAN  
                  class=docEmphBold>lpd</SPAN><A name=IXT-16-350757></A> uses a  
                  crude but tricky way to log the status of queuing and  
                  printing. In the spool directory for each print queue, a <SPAN  
                  class=docEmphBold>lock</SPAN> file is written that contains  
                  the PID of the child <SPAN class=docEmphBold>lpd</SPAN>  
                  process handling the queue. Normally, this file has  
                  permissions 644: </P><PRE># <B>cd /var/spool/lpd/lp</B>
# <B>ls -l lock</B>
-rw-r--r--   1 root     root            5 Mar 18 19:50 lock</PRE> 
                  <P class=docText>When printing is stopped, the user's execute 
                  permission bit is set on this file: </P><PRE># <B>lpc stop lp</B>
# <B>ls -l lock</B>
-rwxr--r--   1 root     root            5 Mar 18 19:50 lock</PRE>
                  <P class=docText>When queuing is disabled, the group's execute 
                  bit is also set:</P><PRE># <B>lpc disable lp</B>
lp:
        queuing disabled
# <B>ls -l lock</B>
-rwxr-xr--   1 root     root            5 Mar 18 19:50 lock</PRE>
                  <P class=docText>These bits act as flags to indicate the  
                  status of printing and queuing.<A name=IXTR3-84></A> <A  
                  name=IXTR3-85></A><A name=IXTR3-86></A></P><A 
                  href="http://safari.informit.com/?xmlid=1-56592-748-6/4071532"><IMG 
                  height=1 src="16-2.files/pixel.htm" width=1 border=0></A>
                  <UL></UL></TD></TR></TBODY></TABLE>
            
            
          </TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD vAlign=bottom align=middle colSpan=3>&nbsp;</TD></TR>
  <TR>
    <TD colSpan=4></TD></TR></TBODY></TABLE><!--
(guidin)584DDD8E-DC91-4753-A8-94-0A-5B-CA-9F-5C-96
(guidout)584DDD8E-DC91-4753-A8-94-0A-5B-CA-9F-5C-96
(ip)211.76.97.228
(host)safari.informit.com
(portal)informit
(ref)http://safari.informit.com/JVXSL.asp?x=1&mode=section&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-16-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1
(base)?x=1&mode=print&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-16-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1
(mode)print
(xmlid)1-56592-748-6/lpicertnut-CHP-16-SECT-2
(key)77BDD37BD144271538599547F3F513CCC632FE7317BE1B3D26790352FECE7B23F00108F67F49C1D8
(user)84132/106143

(xsl)0ms
(lib)500ms
(xml)344ms
(xsl)31ms
(ent)0ms
(buf)0ms

(tot)891ms
--></BODY></HTML>
