<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0172)http://safari.informit.com/JVXSL.asp?x=1&mode=print&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-20-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1 -->
<HTML><HEAD><TITLE>InformIT Online Books > LPI Linux Certification in a Nutshell</TITLE>
<META http-equiv=Content-Type content="text/html; charset=big5"><LINK 
href="20-2.files/style.css" type=text/css rel=STYLESHEET><LINK 
href="20-2.files/docsafari.css" type=text/css rel=STYLESHEET>
<SCRIPT>
      function OpenWin(url, w, h)
      {
        if(!w) w = 400;
        if(!h) h = 300;
        window.open(url, "_new", "width=" + w + ",height=" + h + ",menubar=no,toobar=no,scrollbars=yes", true);
      }
    </SCRIPT>

<META content="Microsoft FrontPage 4.0" name=GENERATOR></HEAD>
<BODY leftMargin=0 topMargin=0 marginheight="0" marginwidth="0"><A 
name=toppage></A><SPAN class=v2></SPAN>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR vAlign=top>
    <TD align=left>
      <TABLE width="95%">
        <TBODY>
        <TR>
          <TD align=left><BR><SPAN class=printhdr><B>Book: </B>LPI Linux  
            Certification in a Nutshell<BR><B>Section: </B>Chapter 20.&nbsp;  
            Networking Services (Topic 1.13)</SPAN><BR><BR><BR> 
            <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
              <TBODY>
              <TR>
                <TD vAlign=top><A name=lpicertnut-CHP-20-SECT-2></A>
                  <H3 class=docSection1Title>20.2 Objective 2: Operate and 
                  Perform Basic Configuration of sendmail</H3>
                  <P class=docText>The <A  
                  name=lpicertnut-IDXTERM-1447></A>sendmail <A  
                  name=IXT-20-351004></A>Mail Transfer Agent (or MTA) is  
                  responsible for handling a large portion of email sent on the  
                  Internet and inside enterprises. It has broad capabilities to  
                  handle mail routing and can perform complex rewriting of email  
                  addresses. It also has a long history of deployment on early  
                  networked systems where I/O bottlenecks were significant. As a  
                  result of this history, sendmail's configuration file was  
                  constructed over the years to be succinct and small, allowing  
                  it to be read quickly by the sendmail daemon. Unfortunately,  
                  it can also appear to be somewhat cryptic to administrators,  
                  and detailed configuration of sendmail has become known as  
                  somewhat of an art. </P> 
                  <P class=docText>Configuration details of sendmail are 
                  nontrivial and beyond the scope of the LPIC Level 1 exams. 
                  However, a basic sendmail configuration for a system in an 
                  established domain is relatively simple to implement and is 
                  covered in Exam 102. </P><A 
                  name=lpicertnut-CHP-20-SECT-2.1></A>
                  <H4 class=docSection2Title>20.2.1 Configuring sendmail</H4>
                  <P class=docText><A name=IXT-20-351005></A><A 
                  name=IXT-20-351006></A>The sendmail configuration file is  
                  <I>/etc/sendmail.cf</I><A name=IXT-20-351007></A>. This text  
                  file contains information to control the processing of mail on  
                  your system, and it is read at every invocation of sendmail.  
                  Each line in the file defines a configuration command, which  
                  begins with a short one- or two-letter command definition. The  
                  file can also contain comments beginning with <TT>#</TT>. To  
                  simplify a basic setup, example <I>sendmail.cf</I><A  
                  name=IXT-20-351008></A> files exist in most installations.  
                  </P><A name=lpicertnut-CHP-20-SECT-2.1.1></A>
                  <H5 class=docSection3Title>20.2.1.1 The smart host 
                  parameter</H5>
                  <P class=docText>To enable mail transfer inside an established  
                  organization, you need to configure sendmail to transfer  
                  messages to a <SPAN class=docEmphasis>smart host</SPAN><A  
                  name=IXT-20-351009></A>, most likely the main mail-processing  
                  system in your domain. For example, if your enterprise's mail  
                  is handled by <TT>mail.yourdomain.com</TT>, you can configure  
                  your Linux systems to transfer all mail to that computer for  
                  further processing. To make this change, simply use the  
                  <TT>DS</TT><A name=IXT-20-351010></A> directive in  
                  <I>sendmail.cf</I> : </P><PRE>DSmail.yourdomain.com</PRE><A  
                  name=lpicertnut-CHP-20-SECT-2.2></A>
                  <H4 class=docSection2Title>20.2.2 Mail Aliases</H4>
                  <P class=docText><A name=IXT-20-351011></A><A 
                  name=IXT-20-351012></A><A name=IXT-20-351013></A>Even on  
                  simple sendmail installations, it's useful to configure some  
                  of your system users to have their mail redirected to another  
                  user. For example, artificial users such as <TT>nobody</TT>  
                  shouldn't receive mail, so forwarding any mail received for  
                  that username to an administrator may help with problem  
                  solving. This forwarding is accomplished using <SPAN  
                  class=docEmphasis>mail aliases</SPAN>. A mail alias is simply  
                  a mapping from a username to one or more recipients in this  
                  form: </P><PRE>sysadmin:       jdean, bsmith</PRE>
                  <P class=docText>Aliases are defined in <I>/etc/aliases</I><A  
                  name=IXT-20-351014></A>. Local mail intended for  
                  <TT>sysadmin</TT> is received by both <TT>jdean</TT> and  
                  <TT>bsmith</TT> on the local system, as shown in <a class="docLink" href="#lpicertnut-CHP-20-EX-2">Example  
                  20-2</a>. </P>
                  <H5 class=docExampleTitle><A 
                  name=lpicertnut-CHP-20-EX-2></A>Example 20-2. A Typical  
                  /etc/aliases File </H5><PRE># Basic system aliases -- these MUST be present.
MAILER-DAEMON:  postmaster
postmaster:     root

# General redirections for pseudo accounts.
bin:            root
daemon:         root
games:          root
ingres:         root
nobody:         root
system:         root
toor:           root
uucp:           root

# Well-known aliases.
manager:        root
dumper:         root
operator:       root
webmaster:      root
abuse:          root
spam:           root

# Trap decode to catch security attacks
decode:         root

# Person who should get root's mail
root:           jdean

# Departmental accounts
sales:          bsmith
support:        jdoe</PRE> 
                  <P class=docText>sendmaildoesn't actually read the text  
                  aliases file, since it's not uncommon to find many aliases  
                  defined there. Instead, it reads a compiled <A  
                  name=IXT-20-351015></A>database, <I>/etc/aliases.db</I><A  
                  name=IXT-20-351016></A>, built from <I>/etc/aliases</I>.  
                  Therefore, the database must be updated after any change is  
                  made to <TT>aliases</TT><I>,</I> using the <SPAN  
                  class=docEmphBold>newaliases</SPAN> <A  
                  name=IXT-20-351017></A>command; <SPAN  
                  class=docEmphBold>newaliases</SPAN> has no options and must be  
                  run as <SPAN class=docEmphasis>root</SPAN>. </P><A  
                  name=lpicertnut-CHP-20-SECT-2.2.1></A>
                  <H5 class=docSection3Title>20.2.2.1 Forwarding mail from your 
                  account to another account</H5>
                  <P class=docText>In <A name=IXT-20-351018></A>addition to  
                  permanently established mail aliases, individual users have  
                  the capability to create their own mail aliases on an  
                  as-needed basis by using a <I>.forward</I><A  
                  name=IXT-20-351019></A> file in the home directory. Mail is  
                  sent to the alias by simply putting an email address on a line  
                  by itself in <I>.forward</I>. </P> 
                  <P>
                  <TABLE cellSpacing=0 width="90%" border=1>
                    <TBODY>
                    <TR>
                      <TD>
                        <H2 class=docSidebarTitle>On the Exam</H2>
                        <P class=docText>Remember, the <I>/etc/aliases</I> and 
                        <I>.forward</I> files define mail aliases, and the <SPAN 
                        class=docEmphBold>newaliases</SPAN> command must be 
                        executed after changing the aliases file to recreate the 
                        alias database. </P></TD></TR></TBODY></TABLE><A 
                  name=lpicertnut-CHP-20-SECT-2.3></A>
                  <H4 class=docSection2Title>20.2.3 Queued Mail</H4>
                  <P class=docText>If <A name=IXT-20-351020></A><A  
                  name=IXT-20-351021></A>sendmail cannot deliver mail  
                  immediately, such as on a system using an intermittent dialup  
                  connection, mail is queued for later processing. To see the  
                  mail queue, use the <SPAN class=docEmphBold>mailq</SPAN>  
                  command, like this: </P><PRE>$ <B>mailq</B>
Mail Queue (2 requests)
--Q-ID-- --Size-- -Priority- ---Q-Time--- -Sender/Recipient
WAA12372     3427      30043 Jul  4  2:19 bsmith
                 (host map: lookup (mydom.com): deferred)
                                          jdean@mydom.com
WAA12384      313      30055 Jul  8 22:40 jdoe
                 (host map: lookup (yourdom.com): deferred)
                                          you@yourdom.com</PRE> 
                  <P class=docText>The first line printed for each message shows 
                  the internal identifier used on the local host for the 
                  message, the size of the message in bytes, the date and time 
                  the message was accepted into the queue, and the sender of the 
                  message. The second line shows the error message that caused 
                  this mail to be retained in the queue. Subsequent lines show 
                  message recipients. In this example, two outbound messages are 
                  queued because the DNS host lookups did not succeed. </P>
                  <P>
                  <TABLE cellSpacing=0 width="90%" border=1>
                    <TBODY>
                    <TR>
                      <TD>
                        <H2 class=docSidebarTitle>On the Exam</H2>
                        <P class=docText>Be aware that mail could be queued by 
                        sendmail and that <SPAN class=docEmphBold>mailq</SPAN> 
                        displays a list of those messages. 
                  </P></TD></TR></TBODY></TABLE><A 
                  name=lpicertnut-CHP-20-SECT-2.4></A>
                  <H4 class=docSection2Title>20.2.4 Starting and Stopping 
                  sendmail</H4>
                  <P class=docText><A name=IXT-20-351022></A>sendmail is  
                  typically managed through the runlevel system and the series  
                  of scripts and links in <I>/etc/rc.d</I>. See <a class="docLink" href="20-3.htm">Section  
                  20.3</a> for details on starting and stopping services.<A  
                  name=IXTR3-119></A> </P>
                  <UL></UL></TD></TR></TBODY></TABLE>
            
            
          </TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD vAlign=bottom align=middle colSpan=3>&nbsp;</TD></TR>
  <TR>
    <TD colSpan=4></TD></TR></TBODY></TABLE><!--
(guidin)584DDD8E-DC91-4753-A8-94-0A-5B-CA-9F-5C-96
(guidout)584DDD8E-DC91-4753-A8-94-0A-5B-CA-9F-5C-96
(ip)211.76.97.228
(host)safari.informit.com
(portal)informit
(ref)http://safari.informit.com/JVXSL.asp?x=1&mode=section&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-20-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1
(base)?x=1&mode=print&sortKey=title&sortOrder=asc&view=&xmlid=1-56592-748-6/lpicertnut-CHP-20-SECT-2&open=false&catid=&s=1&b=1&f=1&t=1&c=1&u=1
(mode)print
(xmlid)1-56592-748-6/lpicertnut-CHP-20-SECT-2
(key)77BDD37BD144271538599547F3F513CCC632FE7317BE1B3D26790352FECE7B23F00108F67F49C1D8
(user)84132/106143

(xsl)0ms
(lib)485ms
(xml)312ms
(xsl)16ms
(ent)0ms
(buf)0ms

(tot)828ms
--></BODY></HTML>
